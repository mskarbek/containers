default:
  tags:
    - buildah

workflow:
  rules:
    - if: $CI_PIPELINE_SOURCE == "web"
    - if: $CI_PIPELINE_SOURCE == "trigger"
    - if: $CI_PIPELINE_SOURCE == "pipeline"

stages:
  - sync
  - download

sync-mirror:
  stage: sync
  script:
    - ./mirror.sh

download-raw-artefacts:
  stage: download
  script:
    - ./download-raw.sh
  needs:
    - sync-mirror

download-rpm-artefacts:
  stage: download
  script:
    - ./download-rpm.sh
  needs:
    - sync-mirror
